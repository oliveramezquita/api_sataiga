INFO 2025-03-24 00:23:35,487 autoreload 75544 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 00:23:35,982 autoreload 57096 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 02:58:44,914 autoreload 57096 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api_sataiga/handlers/mongodb_handler.py changed, reloading.
INFO 2025-03-24 02:58:45,345 autoreload 20604 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:00:29,262 autoreload 20604 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api_sataiga/handlers/mongodb_handler.py changed, reloading.
INFO 2025-03-24 03:00:29,537 autoreload 22133 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:01:18,937 autoreload 22133 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:01:19,252 autoreload 22878 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 03:27:17,419 log 22878 6142930944 Not Found: /api/user/apps-user-list
WARNING 2025-03-24 03:28:19,449 log 22878 6142930944 Not Found: /api/user/apps-user-list
INFO 2025-03-24 03:36:07,420 autoreload 22878 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:36:07,887 autoreload 53773 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:36:12,174 autoreload 53773 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:36:12,368 autoreload 53845 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:36:18,545 autoreload 53845 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:36:18,869 autoreload 53949 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:36:22,098 autoreload 53949 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:36:22,400 autoreload 54030 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:36:45,060 autoreload 54030 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:36:45,351 autoreload 54375 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 03:38:00,316 log 54375 6147584000 Bad Request: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 03:39:58,235 autoreload 54375 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:39:58,631 autoreload 57217 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:40:19,303 autoreload 57217 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:40:19,616 autoreload 57531 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 03:40:28,342 log 57531 6167326720 Bad Request: /api/user/67e0d3653722393667f2bba4
WARNING 2025-03-24 03:41:09,345 log 57531 6167326720 Bad Request: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 03:42:51,847 autoreload 57531 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:42:52,315 autoreload 59788 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 03:43:09,429 log 59788 6163001344 Bad Request: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 03:45:34,394 autoreload 59788 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:45:34,729 autoreload 62156 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 03:45:41,254 log 62156 6190477312 Bad Request: /api/user/67e0d3653722393667f2bba4
WARNING 2025-03-24 03:45:48,528 log 62156 6190477312 Bad Request: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 03:54:26,665 autoreload 62156 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:54:27,015 autoreload 69945 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 03:59:45,475 autoreload 69945 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 03:59:45,866 autoreload 74756 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 04:00:01,508 autoreload 74756 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 04:00:01,817 autoreload 74980 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 04:00:11,065 log 74980 6123450368 Bad Request: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 04:00:42,032 autoreload 74980 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 04:00:42,353 autoreload 75603 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 04:00:53,825 autoreload 75603 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 04:00:54,149 autoreload 75772 8588707904 Watching for file changes with StatReloader
ERROR 2025-03-24 04:01:07,128 exception 75772 6146027520 Ocurrió una excepción: 'list' object has no attribute 'items'
ERROR 2025-03-24 04:01:07,129 exception 75772 6146027520 Detalles del traceback:
Traceback (most recent call last):
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/views/user.py", line 27, in patch
    return use_case.update()
           ~~~~~~~~~~~~~~~^^
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py", line 155, in update
    self.data['permissions'] = resolve_permissions(
                               ~~~~~~~~~~~~~~~~~~~^
        self.data['permissions'])
        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/helpers/resolve_permissions.py", line 3, in resolve_permissions
    step_2 = {k: [key for key, value in v.items(
                                        ^^^^^^^
AttributeError: 'list' object has no attribute 'items'

ERROR 2025-03-24 04:01:07,130 log 75772 6146027520 Internal Server Error: /api/user/67e0d3653722393667f2bba4
INFO 2025-03-24 04:01:28,225 autoreload 75772 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 04:01:28,569 autoreload 76305 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 12:23:01,358 log 76305 6191149056 Not Found: /dashboard/analytics/projects
WARNING 2025-03-24 12:23:06,118 log 76305 6207975424 Not Found: /dashboard/analytics/projects
ERROR 2025-03-24 12:23:19,637 exception 76305 6224801792 Ocurrió una excepción: 'icon'
ERROR 2025-03-24 12:23:19,645 exception 76305 6224801792 Detalles del traceback:
Traceback (most recent call last):
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/views/auth.py", line 8, in post
    return use_case.login()
           ~~~~~~~~~~~~~~^^
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/auth_use_case.py", line 43, in login
    user = UserSerializer(user[0]).data
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 571, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 249, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 538, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1870, in to_representation
    return method(value)
  File "/Users/aemo/Projects/api_sataiga/api_sataiga/api/serializers/user_serializer.py", line 27, in get_role
    return {'name': role[0]['name'], 'value': role[0]['value'], 'icon': role[0]['icon']}
                                                                        ~~~~~~~^^^^^^^^
KeyError: 'icon'

ERROR 2025-03-24 12:23:19,646 log 76305 6224801792 Internal Server Error: /api/login
INFO 2025-03-24 12:25:15,336 autoreload 76305 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/serializers/user_serializer.py changed, reloading.
INFO 2025-03-24 12:25:15,769 autoreload 68976 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 12:25:27,598 log 68976 6202355712 Not Found: /dashboard/analytics/projects
INFO 2025-03-24 12:42:50,060 autoreload 68976 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 12:42:50,392 autoreload 84515 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 12:44:31,148 autoreload 84515 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/user_use_case.py changed, reloading.
INFO 2025-03-24 12:44:31,519 autoreload 86016 8588707904 Watching for file changes with StatReloader
WARNING 2025-03-24 12:47:08,592 log 86016 6144602112 Not Found: /api/update_permissions/67dcea7f710149073c15881b
ERROR 2025-03-24 12:49:33,371 exception 86016 6127775744 Ocurrió una excepción: Expected a `Response`, `HttpResponse` or `StreamingHttpResponse` to be returned from the view, but received a `<class 'NoneType'>`
ERROR 2025-03-24 12:49:33,374 exception 86016 6127775744 Detalles del traceback:
Traceback (most recent call last):
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 511, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
                    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aemo/Projects/api_sataiga/venv/lib/python3.13/site-packages/rest_framework/views.py", line 423, in finalize_response
    assert isinstance(response, HttpResponseBase), (
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: Expected a `Response`, `HttpResponse` or `StreamingHttpResponse` to be returned from the view, but received a `<class 'NoneType'>`

ERROR 2025-03-24 12:49:33,374 log 86016 6127775744 Internal Server Error: /api/update-permissions/67dcea7f710149073c15881b
INFO 2025-03-24 12:52:56,107 autoreload 86016 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 12:52:56,501 autoreload 93514 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 12:53:01,752 autoreload 93514 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 12:53:02,034 autoreload 93614 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 12:54:12,119 autoreload 93614 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 12:54:12,550 autoreload 94659 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 12:55:23,481 autoreload 94659 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 12:55:23,776 autoreload 95715 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 14:06:53,734 autoreload 95715 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 14:06:54,183 autoreload 46304 8588707904 Watching for file changes with StatReloader
INFO 2025-03-24 14:07:00,564 autoreload 46304 8588707904 /Users/aemo/Projects/api_sataiga/api_sataiga/api/use_cases/role_use_case.py changed, reloading.
INFO 2025-03-24 14:07:00,913 autoreload 46406 8588707904 Watching for file changes with StatReloader
